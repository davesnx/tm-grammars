(library
 (name tm_grammars)
 (public_name tm-grammars)
 (libraries
  tm-grammars.c
  tm-grammars.cpp
  tm-grammars.cram
  tm-grammars.css
  tm-grammars.diff
  tm-grammars.dockerfile
  tm-grammars.dune
  tm-grammars.go
  tm-grammars.graphql
  tm-grammars.html
  tm-grammars.java
  tm-grammars.javascript
  tm-grammars.json
  tm-grammars.jsonc
  tm-grammars.makefile
  tm-grammars.markdown
  tm-grammars.menhir
  tm-grammars.mlx
  tm-grammars.ocaml
  tm-grammars.ocamllex
  tm-grammars.opam-file
  tm-grammars.python
  tm-grammars.reason
  tm-grammars.ruby
  tm-grammars.rust
  tm-grammars.shellscript
  tm-grammars.sql
  tm-grammars.toml
  tm-grammars.tsx
  tm-grammars.typescript
  tm-grammars.yaml))

(rule
 (alias gen)
 (deps ../../sources.json ../../scripts/gen_all_module.sh)
 (targets tm_grammars.ml tm_grammars.mli)
 (mode
  (promote (until-clean)))
 (action
  (run bash ../../scripts/gen_all_module.sh ../../sources.json)))
