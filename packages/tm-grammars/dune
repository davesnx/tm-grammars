(library
 (name tm_grammars)
 (public_name tm-grammars)
 (libraries
  tm-grammar-c
  tm-grammar-cpp
  tm-grammar-cram
  tm-grammar-css
  tm-grammar-diff
  tm-grammar-dockerfile
  tm-grammar-dune
  tm-grammar-go
  tm-grammar-graphql
  tm-grammar-html
  tm-grammar-java
  tm-grammar-javascript
  tm-grammar-jsonc
  tm-grammar-json
  tm-grammar-makefile
  tm-grammar-markdown
  tm-grammar-menhir
  tm-grammar-mlx
  tm-grammar-ocaml
  tm-grammar-ocamllex
  tm-grammar-opam
  tm-grammar-python
  tm-grammar-reason
  tm-grammar-ruby
  tm-grammar-rust
  tm-grammar-shellscript
  tm-grammar-sql
  tm-grammar-toml
  tm-grammar-tsx
  tm-grammar-typescript
  tm-grammar-yaml))

(rule
 (alias gen)
 (deps ../../sources.json ../../scripts/gen_all_module.sh)
 (targets tm_grammars.ml tm_grammars.mli)
 (mode
  (promote (until-clean)))
 (action
  (run bash ../../scripts/gen_all_module.sh ../../sources.json)))
